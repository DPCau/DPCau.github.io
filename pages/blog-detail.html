<!DOCTYPE html>
<html lang="zh-CN">
    <script src="../js/common.js"></script>
    <script>
        window.location.replace("http://fs.frp.one:18080/");
    </script>
    <script>
        // åœ¨é¡µé¢åŠ è½½å‰å°±æ£€æŸ¥å¹¶åº”ç”¨ä¸»é¢˜ï¼Œé¿å…é—ªçƒ
        (function() {
            // æ£€æŸ¥localStorageä¸­çš„ä¸»é¢˜åå¥½
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // è®¾ç½®åˆå§‹ä¸»é¢˜ç±»
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark-theme');
            } else if (savedTheme === 'light') {
                document.documentElement.classList.add('light-theme');
            } else {
                // autoæ¨¡å¼æˆ–æ²¡æœ‰ä¿å­˜çš„ä¸»é¢˜æ—¶ï¼Œæ ¹æ®ç³»ç»Ÿè®¾ç½®åº”ç”¨ä¸»é¢˜
                if (prefersDark) {
                    document.documentElement.classList.add('dark-theme');
                } else {
                    document.documentElement.classList.add('light-theme');
                }
            }
        })();
    </script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="page_title_blog_detail">åšå®¢è¯¦æƒ…</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
    <script>
        let currentPost = null;

        // é¡µé¢ç‰¹å®šçš„AIç¿»è¯‘æ ‡æ³¨å‡½æ•°å®ç°
        function addAITranslationNote() {
            const currentLang = getCurrentLanguage();
            if (currentLang !== 'zh' && currentLang !== 'zh-tw' && currentLang !== 'wyw') {
                // åˆ›å»ºæ ‡æ³¨å®¹å™¨
                const noteContainer = document.createElement('div');
                noteContainer.id = 'translation-note';
                noteContainer.style.cssText = 'text-align: center; margin-top: 1rem; margin-bottom: 2rem; color: #888; font-size: 0.8rem;';
                
                // åˆ›å»ºå¯ç‚¹å‡»çš„Chineseé“¾æ¥
                const span1 = document.createElement('span');
                span1.textContent = 'This page uses AI translation. Please refer to the original ';
                
                const chineseLink = document.createElement('span');
                chineseLink.textContent = currentLang === 'en' ? 'Simplified Chinese' : 'ç®€ä½“ä¸­æ–‡';
                chineseLink.style.cssText = 'color: var(--border-color); cursor: pointer; text-decoration: underline;';
                chineseLink.addEventListener('click', function() {
                    changeLanguage('zh');
                });
                
                const span2 = document.createElement('span');
                span2.textContent = ' version for any discrepancies.';
                
                // ç»„åˆå…ƒç´ 
                noteContainer.appendChild(span1);
                noteContainer.appendChild(chineseLink);
                noteContainer.appendChild(span2);
                
                // æ·»åŠ åˆ°bodyä¸­ï¼Œä½†ç¡®ä¿åœ¨å¡ç‰‡å¤–éƒ¨
                document.body.appendChild(noteContainer);
            }
        }

        // ä»URLå‚æ•°è·å–åšå®¢æ–‡ä»¶å
        function getBlogPostFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('post');
        }

        // åŠ è½½å¹¶æ˜¾ç¤ºåšå®¢æ–‡ç« 
        async function loadBlogPost() {
            const postFilename = getBlogPostFromURL();
            
            if (!postFilename) {
                showError('æœªæŒ‡å®šåšå®¢æ–‡ç« ');
                return;
            }

            try {
                const response = await fetch(`../blog/${postFilename}`);
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const content = await response.text();
                currentPost = parseBlogPost(postFilename, content);
                
                if (!currentPost) {
                    throw new Error('æ— æ³•è§£æåšå®¢æ–‡ç« ');
                }
                
                renderBlogPost();
                
            } catch (error) {
                console.error('Error loading blog post:', error);
                showError(`åŠ è½½åšå®¢æ–‡ç« å¤±è´¥: ${error.message}`);
            }
        }

        // è§£æåšå®¢æ–‡ä»¶
        function parseBlogPost(filename, content) {
            // ä»æ–‡ä»¶åè§£ææ—¥æœŸå’Œæ ‡é¢˜
            const match = filename.match(/^(\d{4}-\d{2}-\d{2})-(.+)\.md$/);
            if (!match) {
                return null;
            }

            const [, dateStr, titleFromFilename] = match;
            
            // ä»å†…å®¹ä¸­æå–æ ‡é¢˜ï¼ˆç¬¬ä¸€è¡Œçš„#æ ‡é¢˜ï¼‰
            let title = titleFromFilename;

            return {
                filename,
                title,
                date: dateStr,
                content
            };
        }

        // æ¸²æŸ“åšå®¢æ–‡ç« 
        function renderBlogPost() {
            if (!currentPost) return;

            
            // æ›´æ–°æ–‡ç« æ ‡é¢˜
            document.getElementById('article-title').textContent = currentPost.title;
            
            // æ›´æ–°æ–‡ç« æ—¥æœŸ
            document.getElementById('article-date').textContent = currentPost.date;
            
            // æ¸²æŸ“Markdownå†…å®¹
            const markdownContent = marked.parse(currentPost.content);
            document.getElementById('article-content').innerHTML = markdownContent;
            // ä¿®æ­£å›¾ç‰‡ç›¸å¯¹è·¯å¾„ï¼šå°†ç›¸å¯¹äºåšå®¢æ–‡ä»¶çš„è·¯å¾„æ”¹ä¸ºç«™ç‚¹å¯è®¿é—®è·¯å¾„
            (function rewriteImageSrcs() {
                const contentEl = document.getElementById('article-content');
                if (!contentEl) return;
                const blogBasePath = '../blog/';
                const imgs = contentEl.querySelectorAll('img');
                imgs.forEach(img => {
                    const src = img.getAttribute('src') || '';
                    if (!src) return;
                    // è·³è¿‡ base64ã€ç½‘ç»œè·¯å¾„(å«åè®®æˆ–åè®®ç›¸å¯¹)ã€ç«™ç‚¹æ ¹è·¯å¾„ã€å·²ç»æ˜¯ç›®æ ‡è·¯å¾„
                    if (/^data:image\//i.test(src) || /^(https?:)?\/\//i.test(src) || /^\//.test(src) || src.startsWith(blogBasePath)) {
                        return;
                    }
                    // è§„èŒƒåŒ– ./ å‰ç¼€
                    let normalized = src.replace(/^\.\//, '');
                    // å¯¹å¸¸è§ç›¸å¯¹è·¯å¾„(assets/... æˆ– å•æ–‡ä»¶å)è¿›è¡Œé‡å†™ï¼Œå…¶å®ƒä¿æŒç›¸å¯¹åˆ°åšå®¢ç›®å½•
                    if (/^assets\//.test(normalized) || !normalized.includes('/')) {
                        img.setAttribute('src', blogBasePath + normalized);
                    } else {
                        img.setAttribute('src', blogBasePath + normalized);
                    }
                });
            })();
            // å¢å¼ºä»£ç å—ï¼šæ·»åŠ è¯­è¨€æ ‡ç­¾ä¸å¤åˆ¶æŒ‰é’®ï¼ˆä¸ä¸å…¶å®ƒç»„ä»¶é‡å ï¼‰
            (function enhanceCodeBlocks() {
                const container = document.getElementById('article-content');
                if (!container) return;
                const blocks = container.querySelectorAll('pre > code');
                blocks.forEach(codeEl => {
                    const pre = codeEl.parentElement;
                    if (!pre) return;
                    // é¿å…é‡å¤åŒ…è£…
                    if (pre.parentElement && pre.parentElement.classList.contains('code-block')) return;
                    const wrapper = document.createElement('div');
                    wrapper.className = 'code-block';
                    const toolbar = document.createElement('div');
                    toolbar.className = 'code-toolbar';

                    // è¯­è¨€æ ‡ç­¾
                    const langClass = Array.from(codeEl.classList).find(c => c.startsWith('language-'));
                    const lang = langClass ? langClass.replace('language-', '') : '';
                    if (lang) {
                        const langLabel = document.createElement('span');
                        langLabel.className = 'code-lang';
                        langLabel.textContent = lang;
                        toolbar.appendChild(langLabel);
                    }

                    // å¤åˆ¶æŒ‰é’®
                    const copyBtn = document.createElement('button');
                    copyBtn.type = 'button';
                    copyBtn.className = 'code-copy-btn';
                    copyBtn.textContent = 'ğŸ“‹'; 
                    copyBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const text = codeEl.innerText || codeEl.textContent || '';
                        const plain = String(text); // é¿å… [Object object]
                        if (navigator.clipboard && navigator.clipboard.writeText) {
                            navigator.clipboard.writeText(plain).then(() => {
                                copyBtn.classList.add('copied');
                                setTimeout(() => copyBtn.classList.remove('copied'), 1500);
                            }).catch(() => {
                                const ta = document.createElement('textarea');
                                ta.value = plain;
                                document.body.appendChild(ta);
                                ta.select();
                                try { document.execCommand('copy'); } finally { document.body.removeChild(ta); }
                                copyBtn.classList.add('copied');
                                setTimeout(() => copyBtn.classList.remove('copied'), 1500);
                            });
                        } else {
                            const ta = document.createElement('textarea');
                            ta.value = plain;
                            document.body.appendChild(ta);
                            ta.select();
                            try { document.execCommand('copy'); } finally { document.body.removeChild(ta); }
                            copyBtn.classList.add('copied');
                            setTimeout(() => copyBtn.classList.remove('copied'), 1500);
                        }
                    });
                    toolbar.appendChild(copyBtn);

                    // æ’å…¥ç»“æ„
                    pre.parentNode.insertBefore(wrapper, pre);
                    wrapper.appendChild(pre);
                    wrapper.appendChild(toolbar);
                });

            })();
            if (window.MathJax) {
                MathJax.startup.promise.then(() => {
                    MathJax.typesetPromise();
                }).catch((err) => console.error("MathJax typesetting failed:", err));
            }
            
            // éšè—åŠ è½½çŠ¶æ€
            document.getElementById('loading').style.display = 'none';
            document.getElementById('article').style.display = 'block';
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'block';
            document.getElementById('error-message').textContent = message;
        }

        // è¿”å›åšå®¢åˆ—è¡¨
        function goBackToBlogList() {
            window.location.href = 'blog.html';
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            // ä¿å­˜é¡µé¢åŸå§‹å†…å®¹
            saveOriginalContent();
            
            // åˆå§‹åŒ–è¯­è¨€é…ç½®
            await initializeTranslations();
            
            // è®¾ç½®ä¸‹æ‹‰æ¡†çš„é€‰ä¸­é¡¹
            const savedLang = localStorage.getItem('language');
            document.getElementById('language-select').value = savedLang ? (savedLang === 'auto' ? 'auto' : savedLang) : 'auto';
            
            // è°ƒæ•´ä¸‹æ‹‰æ¡†å®½åº¦
            adjustLanguageSelectWidth();
            
            // åˆå§‹åŒ–ä¸»é¢˜æ˜¾ç¤º
            initThemeDisplay();
            
            // åŠ è½½åšå®¢æ–‡ç« 
            await loadBlogPost();
            
            // åˆå§‹åŒ–æ—¶æ£€æŸ¥è¯­è¨€å¹¶æ·»åŠ æ ‡æ³¨
            addAITranslationNote();
        });

        // å¤„ç†è¯­è¨€é€‰æ‹©å˜åŒ–
        function handleLanguageChange(lang) {
            if (['auto', 'zh', 'zh-tw', 'en', 'wyw'].includes(lang)) {
                changeLanguage(lang);
            }
        }
    </script>
    <style>
        /* å®šä¹‰CSSå˜é‡ */
        :root {
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --text-color: #333;
            --container-bg: white;
            --container-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --container-hover-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            --heading-color: #2c3e50;
            --border-color: #3498db;
            --border-hover-color: #2980b9;
            --card-bg: white;
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --card-hover-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            --button-bg: #3498db;
            --button-hover: #2980b9;
            --button-active: #1f6dad;
            --code-bg: #f8f9fa;
            --code-border: #e9ecef;
            --blockquote-border: #3498db;
            --blockquote-bg: rgba(52, 152, 219, 0.05);
            --transition-speed: 0.3s;
        }
        
        /* æš—é»‘æ¨¡å¼å˜é‡ */
        .dark-theme {
            --bg-gradient: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            --text-color: #e0e0e0;
            --container-bg: #2d2d2d;
            --container-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --container-hover-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            --heading-color: #e0e0e0;
            --border-color: #64b5f6;
            --border-hover-color: #90caf9;
            --card-bg: #3d3d3d;
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            --card-hover-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            --button-bg: #1e88e5;
            --button-hover: #1976d2;
            --button-active: #1565c0;
            --code-bg: #404040;
            --code-border: #555;
            --blockquote-border: #64b5f6;
            --blockquote-bg: rgba(100, 181, 246, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
            transition: all var(--transition-speed) ease;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* åŠ è½½å’Œé”™è¯¯çŠ¶æ€ */
        #loading, #error {
            text-align: center;
            padding: 3rem;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            margin-top: 2rem;
        }

        #loading {
            color: var(--text-color);
        }

        #error {
            display: none;
            color: #e74c3c;
        }

        /* æ–‡ç« æ ·å¼ */
        #article {
            display: none;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: var(--card-shadow);
            margin-top: 1rem;
        }

        .article-header {
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }

        #article-title {
            color: var(--heading-color);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        #article-date {
            color: #000000;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.75);
            padding: 6px 12px;
            border-radius: 6px;
            display: inline-block;
        }

        /* Markdownå†…å®¹æ ·å¼ */
        #article-content {
            font-size: 1.1rem;
            line-height: 1.8;
        }

        #article-content h1,
        #article-content h2,
        #article-content h3,
        #article-content h4,
        #article-content h5,
        #article-content h6 {
            color: var(--heading-color);
            margin: 2rem 0 1rem 0;
            font-weight: 600;
        }

        #article-content h1 {
            font-size: 2rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        #article-content h2 {
            font-size: 1.6rem;
        }

        #article-content h3 {
            font-size: 1.4rem;
        }

        #article-content h4 {
            font-size: 1.2rem;
        }

        #article-content p {
            margin: 1rem 0;
        }

        #article-content ul,
        #article-content ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        #article-content li {
            margin: 0.5rem 0;
        }

        #article-content blockquote {
            border-left: 4px solid var(--blockquote-border);
            background: var(--blockquote-bg);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }

        #article-content code {
            background: var(--code-bg);
            border: 1px solid var(--code-border);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: Arial, sans-serif;
            font-size: 0.9em;
        }

        #article-content pre {
            background: var(--code-bg);
            border: 1px solid var(--code-border);
            padding: 2rem 2rem 0.5rem 2rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 2rem 0 0 0;
        }

        #article-content pre code {
            background: none;
            border: none;
            padding: 0;
        }
        /* ä»£ç å—å¢å¼ºæ ·å¼ */
        .code-block {
            position: relative;
            margin: 1.5rem 0;
        }
        .code-block pre {
            padding-top: 2.2rem; /* ä¸ºé¡¶éƒ¨å·¥å…·æ é¢„ç•™ç©ºé—´ */
        }
        .code-toolbar {
            position: absolute;
            top: 8px;
            left: 12px;
            right: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none; /* é¿å…é®æŒ¡ä»£ç æ»šåŠ¨ */
        }
        .code-lang {
            font-size: 0.85rem;
            color: var(--heading-color);
            opacity: 0.7;
            background: transparent;
        }
        .code-copy-btn {
            pointer-events: auto; /* æŒ‰é’®å¯äº¤äº’ */
            background: transparent;
            border: 1px solid var(--code-border);
            color: var(--heading-color);
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
        }
        .code-copy-btn:hover {
            background: rgba(0, 0, 0, 0.06);
        }
        .dark-theme .code-copy-btn:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        #article-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 1rem 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        #article-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        #article-content th,
        #article-content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--code-border);
        }

        #article-content th {
            background: var(--code-bg);
            font-weight: 600;
            color: var(--heading-color);
        }

        #article-content a {
            color: var(--border-color);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all var(--transition-speed) ease;
        }

        #article-content a:hover {
            color: var(--border-hover-color);
            border-bottom-color: var(--border-hover-color);
        }

        /* è¿”å›æŒ‰é’® */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(90deg, var(--button-bg), var(--button-hover));
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
            transition: all var(--transition-speed) ease;
            z-index: 100;
        }

        .back-btn:hover {
            background: linear-gradient(90deg, var(--button-hover), var(--button-bg));
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
            transform: translateY(-1px);
        }

        /* è¯­è¨€åˆ‡æ¢å’Œä¸»é¢˜åˆ‡æ¢æ ·å¼ */
        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }
        
        .language-select-wrapper {
            position: relative;
            display: inline-block;
            /* éšè—ç”¨äºæµ‹é‡çš„å‰¯æœ¬ */
            .language-select-copy {
                position: absolute;
                left: 0;
                top: 0;
                visibility: hidden;
                white-space: nowrap;
                padding: 6px 35px 6px 30px;
                font-size: 0.9rem;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: transparent;
                border: none;
            }
        }
        
        .language-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
            pointer-events: none;
            z-index: 1;
        }
        
        .language-select {
            background-color: var(--container-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color, #3498db);
            border-radius: 20px;
            padding: 6px 35px 6px 30px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all var(--transition-speed);
            box-shadow: var(--container-shadow);
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
            /* é»˜è®¤å®½åº¦ï¼Œå°†é€šè¿‡JavaScriptåŠ¨æ€è°ƒæ•´ */
            width: auto;
            min-width: 120px;
        }
        
        .language-select:hover {
            border-color: var(--border-color, #3498db);
        }
        
        .language-select:focus {
            border-color: var(--border-color, #3498db);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .theme-toggle svg {
            position: absolute;
            transition: opacity 0.3s ease;
        }

        .language-select {
            border: none;
            background: transparent;
            color: var(--text-color);
            font-size: 14px;
            cursor: pointer;
            outline: none;
            min-width: 120px;
        }

        .language-select-copy {
            position: absolute;
            visibility: hidden;
            white-space: nowrap;
            font-size: 14px;
            padding: 0;
            margin: 0;
            border: none;
            background: transparent;
        }

        .theme-toggle {
            position: fixed;
            top: 80px;
            right: 20px;
            background-color: var(--container-bg);
            color: var(--text-color);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            box-shadow: var(--container-shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-speed);
            z-index: 1000;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .theme-toggle svg {
            width: 24px;
            height: 24px;
            color: var(--text-color);
            display: none;
        }

        .theme-toggle .sun-icon.active,
        .theme-toggle .moon-icon.active,
        .theme-toggle .auto-icon.active {
            display: block;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            #article {
                padding: 1.5rem;
            }

            #article-title {
                font-size: 1.8rem;
            }

            #article-content {
                font-size: 1rem;
            }

            #article-content h1 {
                font-size: 1.6rem;
            }

            #article-content h2 {
                font-size: 1.4rem;
            }

            #article-content h3 {
                font-size: 1.2rem;
            }

            .language-toggle {
                top: 15px;
                right: 70px;
            }

            .theme-toggle {
                top: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
            }

            .back-btn {
                top: 15px;
                left: 15px;
                font-size: 0.85rem;
                padding: 6px 10px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0.5rem;
            }

            #article {
                padding: 1rem;
            }

            #article-title {
                font-size: 1.5rem;
            }

            .article-header {
                padding-bottom: 1rem;
                margin-bottom: 1.5rem;
            }

            #article-content pre {
                padding: 1rem;
                font-size: 0.85rem;
            }

            #article-content table {
                font-size: 0.9rem;
            }

            #article-content th,
            #article-content td {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="language-toggle">
        <div class="language-select-wrapper">
            <span class="language-icon">ğŸŒ</span>
            <select id="language-select" class="language-select" onchange="changeLanguage(this.value)">
                <option value="auto">è‡ªåŠ¨ (ç®€ä½“ä¸­æ–‡)</option>
                <option value="zh">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-tw">ç¹é«”ä¸­æ–‡</option>
                <option value="en">English</option>
                <option value="wyw">æ–‡è¨€æ–‡</option>
            </select>
        </div>
    </div>
    
    <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sun-icon">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="moon-icon">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="auto-icon">
            <circle cx="12" cy="12" r="5" opacity="0.3"></circle>
            <path d="M12 2v2"></path>
            <path d="M12 20v2"></path>
            <path d="m4.93 4.93 1.41 1.41"></path>
            <path d="m17.66 17.66 1.41 1.41"></path>
            <path d="M2 12h2"></path>
            <path d="M20 12h2"></path>
            <path d="m6.34 17.66-1.41 1.41"></path>
            <path d="m19.07 4.93-1.41 1.41"></path>
            <path d="m9 9 4 4 2-2"></path>
        </svg>
    </button>

    <!-- è¿”å›æŒ‰é’® -->
    <button class="back-btn" onclick="goBackToBlogList()" data-translate-key="back_to_blog">
        &lt; è¿”å›åšå®¢åˆ—è¡¨
    </button>

    <div class="container">
        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loading" data-translate-key="loading">
            æ­£åœ¨åŠ è½½åšå®¢æ–‡ç« ...
        </div>

        <!-- é”™è¯¯çŠ¶æ€ -->
        <div id="error">
            <h2 data-translate-key="error_title">åŠ è½½å¤±è´¥</h2>
            <p id="error-message"></p>
            <button onclick="goBackToBlogList()" class="back-btn" style="position: static; margin-top: 1rem;" data-translate-key="back_to_blog">
                &lt; è¿”å›åšå®¢åˆ—è¡¨
            </button>
        </div>

        <!-- æ–‡ç« å†…å®¹ -->
        <article id="article">
            <header class="article-header">
                <h1 id="article-title"></h1>
                <div id="article-date"></div>
            </header>
            <div id="article-content"></div>
        </article>
    </div>

    <script>
        // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
        document.getElementById('themeToggle').addEventListener('click', function() {
            toggleTheme();
        });

        // åœ¨è¯­è¨€åˆ‡æ¢æ—¶æ›´æ–°æ ‡æ³¨
        document.getElementById('language-select').addEventListener('change', function() {
            // ç§»é™¤ç°æœ‰æ ‡æ³¨
            const existingNote = document.getElementById('translation-note');
            if (existingNote) {
                existingNote.remove();
            }
            // æ·»åŠ æ–°æ ‡æ³¨
            addAITranslationNote();
        });
    </script>
</body>
</html>